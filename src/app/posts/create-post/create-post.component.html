<mat-card>
  <ng-container *ngIf="!isLoading; else spinner">
    <mat-card-content>
      <form [formGroup]="form">
        <mat-form-field>
          <mat-label>Title</mat-label>
          <input matInput type="text" formControlName="title" placeholder="Post Title" />
          <mat-error *ngIf="form.get('title')?.invalid">Please enter a valid title.</mat-error>
        </mat-form-field>

        <div class="picker-wrapper">
          <button mat-stroked-button type="button" (click)="filePicker.click()">
            Pick Image
          </button>
          <input type="file" #filePicker name="file" (change)="pickedImg($event)" />
        </div>
        <div *ngIf="imagePreview && form.get('image')?.valid" class="image-preview">
          <img [src]="imagePreview" [alt]="form.value.title">
        </div>

        <mat-form-field>
          <mat-label>Content</mat-label>
          <textarea matInput rows="6" formControlName="content" placeholder="Post Content"></textarea>
          <mat-error *ngIf="form.get('content')?.invalid">Please enter a conent.</mat-error>
        </mat-form-field>
      </form>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="savePost()">
        Save Post
      </button>
    </mat-card-actions>
  </ng-container>
</mat-card>

<ng-template #spinner>
  <mat-spinner></mat-spinner>
</ng-template>
